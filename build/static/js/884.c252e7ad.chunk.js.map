{"version":3,"file":"static/js/884.c252e7ad.chunk.js","mappings":"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","sources":["@crema/services/apis/axios.js","@crema/utility/helper/persistence-storage.js","@crema/services/apis/api.js","pages/sample/FilialInner/PostEditFilialInner.jsx"],"sourcesContent":["import {getItem} from '../../utility/helper/persistence-storage';\nimport axios from 'axios';\n\naxios.defaults.baseURL = `${process.env.REACT_APP_API_URL}`;\n\naxios.interceptors.request.use((config) => {\n    const jwt = getItem('lptoken');\n    const authorization = jwt!==null ? `Bearer ${jwt}` : '';\n    config.headers.authorization = authorization;\n    return config;\n});\n\nexport default axios;","export const getItem=(key)=>{\n    try {\n        return localStorage.getItem(key)\n    } catch (error) {\n        console.log('Error getting data')\n    }\n}\n\nexport const setItem=(key,data)=>{\n    try {\n        localStorage.setItem(key,data)\n    } catch (error) {\n        console.log('Error saving data')\n    }\n}\nexport const removeItem=(key)=>{\n    try {\n        return localStorage.removeItem(key)\n    } catch (error) {\n        console.log('Error removing data')\n    }\n}","import axios from './axios';\n\nconst apiService = {\n    // malutmotlarni get qilish uchun url beriladi\n    // url / boshlansin yani /edu shunga oxshagan\n    async getData(url) {\n        const {data} = await axios.get(url);\n        return data;\n    },\n    // faqat bitta malumot  get qilish uchun url va idsi beriladi\n    // url / boshlansin yani /edu shunga oxshagan\n    async getDataByID(url, id) {\n        const {data} = await axios.get(`${url}/${id}`);\n        return data;\n    },\n    // malutmotni post qilish uchun url va yaratilgan malumot beriladi\n    // url / boshlansin yani /edu shunga oxshagan\n    async postData(url, formData) {\n        const {data}= await axios.post(url, formData);\n        return data\n    },\n    // malutmotni edit qilish uchun url,id va yaratilgan malumot beriladi\n    // url / boshlansin yani /edu shunga oxshagan\n    async editData(url, formData, id) {\n        const {data}= await axios.put(`${url}/${id}`, formData)\n        return data\n    },\n    // malutmotni delete qilish uchun url va id  beriladi\n    // url / boshlansin yani /edu shunga oxshagan\n    async deleteData(url, id) {\n        await axios.delete(`${url}/${id}`);\n    },\n\n    async deleteImages(url, ids) {\n        console.log('delete image',ids)\n        await axios.delete(url, {data:ids});\n    },\n};\nexport default apiService;","import React, {useEffect, useState} from 'react';\nimport {Button, Col, Form, message, Row, Upload} from 'antd';\nimport ImgCrop from 'antd-img-crop';\nimport {useMutation, useQuery} from 'react-query';\nimport apiService from '../../../@crema/services/apis/api';\nimport {AppLoader} from '../../../@crema';\nimport {useNavigate} from 'react-router-dom';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {EDIT_DATA} from '../../../shared/constants/ActionTypes';\n\nconst initialValueForm = {\n    mediaId: [\"\"]\n};\n\n\nconst PostEditFilialInner = () => {\n    const [form] = Form.useForm();\n    const navigate = useNavigate();\n    const {editId} = useSelector((state) => state.editData);\n    const dispatch = useDispatch();\n\n    const [fileListProps, setFileListProps] = useState([]);\n    const [fileList, setFileList] = useState([]);\n    const [valuesForm, setValues] = useState({});\n    const [isNotEditImages, setIsNotEditImages] = useState(false);\n    const [deleteImage, setDeleteImage] = useState([]);\n\n\n    // query-filialInner\n    const {\n        mutate: postFilialInnerMutate,\n        data: postFilialInner,\n        isLoading: postFilialInnerLoading,\n        isSuccess: postFilialInnerSuccess,\n        error: postFilialInnerError,\n        isError: postFilialInnerIsError,\n    } = useMutation(({url, data}) => apiService.postData(url, data),\n        {\n            onSuccess: () => message.success('Success'),\n            onError: (error) => message.error(error.message)\n        });\n    // query-image\n    const {\n        mutate: imagesUploadMutate,\n        data: imagesUpload,\n        isLoading: imagesUploadLoading,\n        isSuccess: imagesUploadSuccess,\n    } = useMutation(({url, formData}) => apiService.postData(url, formData), {\n\n        onError: (error) => message.error(error.message, 'Rasmning JPG,JPEG,PNG formatlariga ruxsat etilgan')\n    });\n    // query-edit\n\n    const {\n        isLoading: editFilialInnerLoading,\n        data: editFilialInnerData,\n        refetch: editFilialInnerRefetch,\n        isSuccess: editFilialInnerSuccess,\n    } = useQuery(\n        ['edit-filialInner', editId],\n        () => apiService.getDataByID('/filialInner',editId),\n        {\n            enabled: false,\n        },\n    );\n    // put-query\n    const {\n        mutate: putFilialInner,\n        isLoading: putFilialInnerLoading,\n        data: putData,\n        isSuccess: putFilialInnerSuccess,\n        error: putFilialInnerError,\n        isError: putFilialInnerIsError,\n    } = useMutation(({url, data, id}) => apiService.editData(url, data, id), {\n        onError: (error) => message.error(error.message)\n    });\n    // delete-image-query\n    const {mutate: imagesDeleteMutate} = useMutation(({url, ids}) => apiService.deleteImages(url, ids), {\n            onSuccess: () => message.success('Success'),\n            onError: (error) => message.error(error.message)\n        }\n    );\n\n    // filialInner success\n    useEffect(() => {\n        let delImage = []\n        if (putFilialInnerSuccess) {\n            dispatch({type: EDIT_DATA, payload: ''});\n        }\n\n        deleteImage?.map(image => {\n            if (editFilialInnerSuccess && image?.uid) {\n                delImage.push(image?.uid)\n            }\n\n        })\n\n        if (editFilialInnerSuccess &&delImage.length>0) {\n            const ids = {\n                ids: delImage\n            }\n            imagesDeleteMutate({url: '/medias', ids});\n        }\n\n        if (postFilialInnerSuccess || putFilialInnerSuccess) {\n\n            navigate('/filialInner');\n        }\n    }, [postFilialInner, putData]);\n\n    //filialInner  error\n    useEffect(() => {\n        if (postFilialInnerIsError) {\n            message.error(postFilialInnerError.message);\n        }\n        if (putFilialInnerIsError) {\n            message.error(putFilialInnerError.message);\n        }\n    }, [postFilialInnerError, putFilialInnerError]);\n\n    // if edit filialInner\n    useEffect(() => {\n        if (editId !== '') {\n            editFilialInnerRefetch();\n        }\n    }, [editId]);\n\n    // if no edit filialInner\n    useEffect(() => {\n        if (editId === '') {\n            form.setFieldsValue(initialValueForm);\n        }\n    }, []);\n\n    //edit filialInner\n    useEffect(() => {\n        const imagesInitial = [];\n        for (let i = 0; i < editFilialInnerData?.images?.length; i++) {\n            const editDefaultImages = {\n                uid: editFilialInnerData?.images[i]?._id,\n                name: editFilialInnerData?.images[i]?.name,\n                location: editFilialInnerData?.images[i]?.path,\n                status: \"done\",\n                url: `${process.env.REACT_APP_API_URL}/${editFilialInnerData?.images[i]?.path}`\n            };\n            imagesInitial.push(editDefaultImages);\n        }\n        if (editFilialInnerSuccess) {\n            const edit = {\n                mediaId: imagesInitial,\n            };\n            setFileListProps(imagesInitial);\n\n            form.setFieldsValue(edit);\n        }\n    }, [editFilialInnerData]);\n\n    // post filialInner\n    useEffect(() => {\n\n        let imageData = []\n\n        let patchImagesAndInitialImages = [];\n        if (imagesUploadSuccess) {\n\n            patchImagesAndInitialImages = fileList.concat(imagesUpload);\n        } else {\n            patchImagesAndInitialImages = [...fileList];\n        }\n\n        const deleteLocalImage = []\n        patchImagesAndInitialImages.map((image) => {\n            if (!image?.originFileObj?.uid) {\n                deleteLocalImage.push(image)\n            }\n        })\n\n\n        if (!editFilialInnerSuccess && imagesUpload) {\n            imagesUpload?.map(image => {\n                imageData.push(image?._id)\n            })\n        } else {\n            deleteLocalImage.map((image) => {\n\n                if (image?.uid) {\n                    imageData.push(image?.uid)\n                } else {\n                    imageData.push(image?._id)\n\n                }\n            });\n        }\n\n\n        const data = {\n            mediaId: imageData,\n\n        };\n        if (imagesUploadSuccess && !editFilialInnerSuccess) {\n            postFilialInnerMutate({url: '/filialInner', data});\n        } else if (isNotEditImages || imagesUploadSuccess) {\n            putFilialInner({url: '/filialInner', data, id: editId});\n        }\n    }, [imagesUpload, valuesForm]);\n    // on finish\n    const onFinish = (values) => {\n        const formData = new FormData();\n\n        let uploadNewImage = false;\n\n        fileListProps?.map(file => {\n            if (editFilialInnerSuccess) {\n                if (file?.originFileObj?.uid) {\n                    uploadNewImage = true;\n                    formData.append('media', file?.originFileObj);\n                    setIsNotEditImages(false);\n                    setFileList(fileListProps);\n                } else {\n                    uploadNewImage = false;\n                    setFileList(fileListProps);\n                    setIsNotEditImages(true);\n                }\n            } else {\n                uploadNewImage = true;\n                formData.append('media', file?.originFileObj);\n            }\n\n        })\n        if (uploadNewImage && !imagesUploadSuccess) {\n            imagesUploadMutate({url: '/medias', formData});\n        }\n\n        setValues(values);\n    };\n    const onFinishFailed = (errorInfo) => {\n        console.log('Failed:', errorInfo);\n    };\n\n    const onChange = ({fileList: newFileList}) => {\n        setFileListProps(newFileList);\n        form.setFieldsValue({mediaId: newFileList});\n    };\n\n\n    const handleRemoveImage = (file) => {\n        if (editFilialInnerSuccess) {\n            const updateDeleteImage=[...deleteImage]\n            updateDeleteImage.push(file)\n            setDeleteImage(updateDeleteImage);\n        }\n    };\n\n\n    // refresh page again get data\n\n    useEffect(() => {\n        const storedValues = JSON.parse(localStorage.getItem('myFormValues'));\n        if (storedValues) {\n            storedValues.images = [];\n            form.setFieldsValue(storedValues);\n        }\n\n        const handleBeforeUnload = () => {\n            localStorage.setItem(\n                'myFormValues',\n                JSON.stringify(form.getFieldsValue()),\n            );\n        };\n\n        window.addEventListener('beforeunload', handleBeforeUnload);\n\n        return () => {\n            localStorage.removeItem('editDataId');\n            localStorage.removeItem('myFormValues');\n            window.removeEventListener('beforeunload', handleBeforeUnload);\n        };\n    }, []);\n\n    const onPreview = async (file) => {\n        let src = file.url;\n        if (!src) {\n            src = await new Promise((resolve) => {\n                const reader = new FileReader();\n                reader.readAsDataURL(file.originFileObj);\n                reader.onload = () => resolve(reader.result);\n            });\n        }\n        const image = new Image();\n        image.src = src;\n        const imgWindow = window.open(src);\n        imgWindow?.document.write(image.outerHTML);\n    };\n\n    return (\n        <div>\n            {imagesUploadLoading ||\n            postFilialInnerLoading ||\n            editFilialInnerLoading ||\n            putFilialInnerLoading ? (\n                <AppLoader/>\n            ) : (\n                <Form\n                    form={form}\n                    name='basic'\n                    labelCol={{\n                        span: 24,\n                    }}\n                    wrapperCol={{\n                        span: 24,\n                    }}\n                    style={{\n                        maxWidth: '100%',\n                    }}\n                    initialValues={initialValueForm}\n                    onFinish={onFinish}\n                    onFinishFailed={onFinishFailed}\n                    autoComplete='off'>\n                    <Row gutter={20}>\n                        <Col span={12}>\n                            <Form.Item\n                                label='Изображение логотипа'\n                                name={'mediaId'}\n                                rules={[{required: true, message: 'Требуется загрузка изображения логотипа'}]}>\n                                <ImgCrop rotationSlider>\n                                    <Upload\n                                        maxCount={2}\n                                        fileList={fileListProps}\n                                        listType='picture-card'\n                                        onChange={onChange}\n                                        onPreview={onPreview}\n                                        beforeUpload={() => false}\n                                        onRemove={handleRemoveImage}>\n                                        {fileListProps.length > 1 ? \"\" : \"Upload\"}\n                                    </Upload>\n                                </ImgCrop>\n                            </Form.Item>\n                        </Col>\n\n                    </Row>\n\n\n                    <Button type='primary' htmlType='submit' style={{width: '100%'}}>\n                        {editFilialInnerSuccess ? 'Edit' : 'Add'}\n                    </Button>\n                </Form>\n            )}\n        </div>\n    );\n};\n\nexport default PostEditFilialInner;\n"],"names":["axios","baseURL","concat","process","request","use","config","jwt","key","localStorage","getItem","error","console","log","authorization","headers","getData","url","data","get","getDataByID","id","postData","formData","post","editData","put","deleteData","delete","deleteImages","ids","initialValueForm","mediaId","PostEditFilialInner","form","Form","useForm","navigate","useNavigate","editId","useSelector","state","dispatch","useDispatch","fileListProps","setFileListProps","useState","fileList","setFileList","valuesForm","setValues","isNotEditImages","setIsNotEditImages","deleteImage","setDeleteImage","mutate","postFilialInnerMutate","postFilialInner","isLoading","postFilialInnerLoading","isSuccess","postFilialInnerSuccess","postFilialInnerError","isError","postFilialInnerIsError","useMutation","_ref","apiService","onSuccess","message","success","onError","imagesUploadMutate","imagesUpload","imagesUploadLoading","imagesUploadSuccess","_ref2","editFilialInnerLoading","editFilialInnerData","refetch","editFilialInnerRefetch","editFilialInnerSuccess","useQuery","enabled","putFilialInner","putFilialInnerLoading","putData","putFilialInnerSuccess","putFilialInnerError","putFilialInnerIsError","_ref3","imagesDeleteMutate","_ref4","useEffect","delImage","type","EDIT_DATA","payload","map","image","uid","push","length","setFieldsValue","imagesInitial","i","_editFilialInnerData$","images","_editFilialInnerData$2","_editFilialInnerData$3","_editFilialInnerData$4","_editFilialInnerData$5","editDefaultImages","_id","name","location","path","status","edit","imageData","patchImagesAndInitialImages","deleteLocalImage","_image$originFileObj","originFileObj","storedValues","JSON","parse","handleBeforeUnload","setItem","stringify","getFieldsValue","window","addEventListener","removeItem","removeEventListener","_jsx","children","AppLoader","_jsxs","labelCol","span","wrapperCol","style","maxWidth","initialValues","onFinish","values","FormData","uploadNewImage","file","_file$originFileObj","append","onFinishFailed","errorInfo","autoComplete","Row","gutter","Col","Item","label","rules","required","ImgCrop","rotationSlider","Upload","maxCount","listType","onChange","_ref5","newFileList","onPreview","async","src","Promise","resolve","reader","FileReader","readAsDataURL","onload","result","Image","imgWindow","open","document","write","outerHTML","beforeUpload","onRemove","updateDeleteImage","Button","htmlType","width"],"sourceRoot":""}