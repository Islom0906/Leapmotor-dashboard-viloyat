{"version":3,"file":"static/js/9.2cf462d7.chunk.js","mappings":"qIAGAA,IAAAA,SAAeC,QAAO,GAAAC,OAAMC,qCAE5BH,IAAAA,aAAmBI,QAAQC,KAAKC,IAC5B,MAAMC,ECNYC,KAClB,IACI,OAAOC,aAAaC,QAAQF,EAChC,CAAE,MAAOG,GACLC,QAAQC,IAAI,qBAChB,GDCYH,CAAQ,WACdI,EAAsB,OAANP,EAAU,UAAAL,OAAaK,GAAQ,GAErD,OADAD,EAAOS,QAAQD,cAAgBA,EACxBR,CAAM,IAGjB,QAAeN,IE0Bf,EApCmB,CAGf,aAAMgB,CAAQC,GACV,MAAM,KAACC,SAAclB,EAAMmB,IAAIF,GAC/B,OAAOC,CACX,EAGA,iBAAME,CAAYH,EAAKI,GACnB,MAAM,KAACH,SAAclB,EAAMmB,IAAI,GAADjB,OAAIe,EAAG,KAAAf,OAAImB,IACzC,OAAOH,CACX,EAGA,cAAMI,CAASL,EAAKM,GAChB,MAAM,KAACL,SAAalB,EAAMwB,KAAKP,EAAKM,GACpC,OAAOL,CACX,EAGA,cAAMO,CAASR,EAAKM,EAAUF,GAC1B,MAAM,KAACH,SAAalB,EAAM0B,IAAI,GAADxB,OAAIe,EAAG,KAAAf,OAAImB,GAAME,GAC9C,OAAOL,CACX,EAGA,gBAAMS,CAAWV,EAAKI,SACZrB,EAAM4B,OAAO,GAAD1B,OAAIe,EAAG,KAAAf,OAAImB,GACjC,EAEA,kBAAMQ,CAAaZ,EAAKa,GACpBlB,QAAQC,IAAI,eAAeiB,SACrB9B,EAAM4B,OAAOX,EAAK,CAACC,KAAKY,GAClC,E,+NC1BJ,MAAMC,EAAmB,CACvBC,QAAQ,GACRC,QAAQ,GACRC,QAAQ,IA4UV,EAvUuBC,KACrB,MAAOC,GAAQC,EAAAA,EAAKC,UACdC,GAAWC,EAAAA,EAAAA,OACX,OAACC,IAAUC,EAAAA,EAAAA,KAAaC,GAAUA,EAAMlB,WACxCmB,GAAWC,EAAAA,EAAAA,OAEVC,EAAeC,IAAoBC,EAAAA,EAAAA,UAAS,KAC5CC,EAAYC,IAAaF,EAAAA,EAAAA,UAAS,CAAC,IACnCG,EAAiBC,IAAsBJ,EAAAA,EAAAA,WAAS,IAChDK,EAAaC,IAAkBN,EAAAA,EAAAA,UAAS,CAAC,IAG9CO,OAAQC,EACRtC,KAAMuC,EACNC,UAAWC,EACXC,UAAWC,EACXlD,MAAOmD,EACPC,QAASC,IACPC,EAAAA,EAAAA,cAAYC,IAAA,IAAC,IAACjD,EAAG,KAAEC,GAAKgD,EAAA,OAAKC,EAAAA,EAAW7C,SAASL,EAAKC,EAAK,GAC3D,CACEkD,UAAWA,IAAMC,EAAAA,GAAQC,QAAQ,WACjCC,QAAU5D,GAAU0D,EAAAA,GAAQ1D,MAAMA,EAAM0D,YAI5Cd,OAAQiB,EACRtD,KAAMuD,EACNf,UAAWgB,EACXd,UAAWe,IACTV,EAAAA,EAAAA,cAAYW,IAAA,IAAC,IAAC3D,EAAG,SAAEM,GAASqD,EAAA,OAAKT,EAAAA,EAAW7C,SAASL,EAAKM,EAAS,GAAC,CAEtEgD,QAAU5D,GAAU0D,EAAAA,GAAQ1D,MAAMA,EAAM0D,QAAQ,wDAKhDX,UAAWmB,EACX3D,KAAM4D,EACNC,QAASC,EACTpB,UAAWqB,IACTC,EAAAA,EAAAA,UACF,CAAC,cAAezC,IAChB,IAAM0B,EAAAA,EAAW/C,YAAY,UAAWqB,IACxC,CACE0C,SAAS,KAKX5B,OAAQ6B,EACR1B,UAAW2B,EACXnE,KAAMoE,EACN1B,UAAW2B,EACX5E,MAAO6E,EACPzB,QAAS0B,IACPxB,EAAAA,EAAAA,cAAYyB,IAAA,IAAC,IAACzE,EAAG,KAAEC,EAAI,GAAEG,GAAGqE,EAAA,OAAKvB,EAAAA,EAAW1C,SAASR,EAAKC,EAAMG,EAAG,GAAC,CACtEkD,QAAU5D,GAAU0D,EAAAA,GAAQ1D,MAAMA,EAAM0D,YAGnCd,OAAQoC,IAAsB1B,EAAAA,EAAAA,cAAY2B,IAAA,IAAC,IAAC3E,EAAG,IAAEa,GAAI8D,EAAA,OAAKzB,EAAAA,EAAWtC,aAAaZ,EAAKa,EAAI,GAAC,CACjGsC,UAAWA,IAAMC,EAAAA,GAAQC,QAAQ,WACjCC,QAAU5D,GAAU0D,EAAAA,GAAQ1D,MAAMA,EAAM0D,YAK1CwB,EAAAA,EAAAA,YAAU,KACR,IAAIC,EAAS,GAOb,GANIP,GACF3C,EAAS,CAACmD,KAAMC,EAAAA,GAAWC,QAAS,KAElChB,GAAiC,OAAX5B,QAAW,IAAXA,GAAAA,EAAa6C,KACrCJ,EAASK,KAAgB,OAAX9C,QAAW,IAAXA,OAAW,EAAXA,EAAa6C,KAEzBjB,GAAiC,OAAX5B,QAAW,IAAXA,GAAAA,EAAa6C,IAAM,CAI3CP,EAAmB,CAAC1E,IAAK,UAAWa,IAH1B,CACRA,IAAIgE,IAGR,EAEIjC,GAAqB0B,IAEvBhD,EAAS,UACX,GACC,CAACkB,EAAY6B,KAGhBO,EAAAA,EAAAA,YAAU,KACJ7B,GACFK,EAAAA,GAAQ1D,MAAMmD,EAAgBO,SAE5BoB,GACFpB,EAAAA,GAAQ1D,MAAM6E,EAAenB,QAC/B,GACC,CAACP,EAAiB0B,KAGrBK,EAAAA,EAAAA,YAAU,KACO,KAAXpD,GACFuC,GACF,GACC,CAACvC,KAGJoD,EAAAA,EAAAA,YAAU,KACO,KAAXpD,GACFL,EAAKgE,eAAerE,EACtB,GACC,KAGH8D,EAAAA,EAAAA,YAAU,KAAO,IAADQ,EAAAC,EAAAC,EACd,MAAMC,EAAe,CACnB,CACEN,IAAoB,OAAfpB,QAAe,IAAfA,GAAsB,QAAPuB,EAAfvB,EAAiB2B,aAAK,IAAAJ,OAAP,EAAfA,EAAwBK,IAC7BC,KAAqB,OAAf7B,QAAe,IAAfA,GAAsB,QAAPwB,EAAfxB,EAAiB2B,aAAK,IAAAH,OAAP,EAAfA,EAAwBK,KAC9BC,OAAQ,OACR3F,IAAI,GAADf,OAAKC,oCAA6B,KAAAD,OAAmB,OAAf4E,QAAe,IAAfA,GAAsB,QAAPyB,EAAfzB,EAAiB2B,aAAK,IAAAF,OAAP,EAAfA,EAAwBM,QAIrE,GAAI5B,EAAoB,CACtB,MAAM6B,EAAO,CACX9E,QAAwB,OAAf8C,QAAe,IAAfA,OAAe,EAAfA,EAAiB9C,QAC1BC,QAAwB,OAAf6C,QAAe,IAAfA,OAAe,EAAfA,EAAiB7C,QAC1BC,QAASsE,GAEXzD,EAAiByD,GACjBpE,EAAKgE,eAAeU,EACtB,IACC,CAAChC,KAGJe,EAAAA,EAAAA,YAAU,KAAO,IAADkB,EAAAC,EACd,IAAIP,EAAM,GAC8E,IAADQ,EAM/CC,EANxC,GAAIjC,GAAsBN,GAAuC,QAApBoC,EAAIjE,EAAc,UAAE,IAAAiE,GAAe,QAAfC,EAAhBD,EAAkBI,qBAAa,IAAAH,GAA/BA,EAAiCd,IAChFO,EAAuB,QAAlBQ,EAAGxC,EAAa,UAAE,IAAAwC,OAAA,EAAfA,EAAiBP,SACpB,GAAIzB,EAAoB,CAAC,IAADmC,EAC7BX,EAAwB,QAAnBW,EAAGtE,EAAc,UAAE,IAAAsE,OAAA,EAAhBA,EAAkBlB,GAC5B,EAEKjB,GAAsBR,IACzBgC,EAAqB,QAAhBS,EAACzC,EAAa,UAAE,IAAAyC,OAAA,EAAfA,EAAiBR,KAEzB,MAAMxF,EAAO,CACXc,QAASiB,EAAWjB,QACpBC,QAASgB,EAAWhB,QACpBC,QAAQuE,GAIN9B,IAAwBM,EAC1BzB,EAAiB,CAACvC,IAAK,UAAWC,UACzBiC,GAAmBwB,IAC5BS,EAAU,CAACnE,IAAK,UAAWC,OAAMG,GAAIoB,GACvC,GACC,CAACgC,EAAcxB,KA+ClB4C,EAAAA,EAAAA,YAAU,KACR,MAAMwB,EAAeC,KAAKC,MAAM9G,aAAaC,QAAQ,iBACjD2G,IACFA,EAAaG,OAAS,GACtBpF,EAAKgE,eAAeiB,IAGtB,MAAMI,EAAqBA,KACzBhH,aAAaiH,QACX,eACAJ,KAAKK,UAAUvF,EAAKwF,kBACrB,EAKH,OAFAC,OAAOC,iBAAiB,eAAgBL,GAEjC,KACHhH,aAAasH,WAAW,cACxBtH,aAAasH,WAAW,gBAC1BF,OAAOG,oBAAoB,eAAgBP,EAAmB,CAC/D,GACA,IAiBH,OACEQ,EAAAA,EAAAA,KAAA,OAAAC,SACGxD,GACDf,GACAkB,GACAQ,GACE4C,EAAAA,EAAAA,KAACE,EAAAA,GAAS,KAEVC,EAAAA,EAAAA,MAAC/F,EAAAA,EAAI,CACHD,KAAMA,EACNuE,KAAK,QACL0B,SAAU,CACRC,KAAM,IAERC,WAAY,CACVD,KAAM,IAERE,MAAO,CACLC,SAAU,QAEZC,cAAe3G,EACf4G,SAxGUC,IAChB,MAAMrH,EAAW,IAAIsH,SAErB,IAAIC,GAAiB,EAEI,IAADC,EAAAC,EACoBC,EAWrCC,EAZHjE,EACkB,QAApB8D,EAAIjG,EAAc,UAAE,IAAAiG,GAAe,QAAfC,EAAhBD,EAAkB5B,qBAAa,IAAA6B,GAA/BA,EAAiC9C,KACnC4C,GAAiB,EACjBvH,EAAS4H,OAAO,QAAyB,QAAlBF,EAAEnG,EAAc,UAAE,IAAAmG,OAAA,EAAhBA,EAAkB9B,eAE3C/D,GAAmB,KAGnB0F,GAAiB,EAEjB1F,GAAmB,KAGrB0F,GAAiB,EACjBvH,EAAS4H,OAAO,QAAyB,QAAlBD,EAAEpG,EAAc,UAAE,IAAAoG,OAAA,EAAhBA,EAAkB/B,gBAEzC2B,IAAmBnE,GACrBH,EAAmB,CAACvD,IAAK,UAAWM,aAGtC2B,EAAU0F,EAAO,EAgFXQ,eA9EgBC,IACtBzI,QAAQC,IAAI,UAAWwI,EAAU,EA8E3BC,aAAa,MAAKpB,SAAA,EAClBE,EAAAA,EAAAA,MAACmB,EAAAA,EAAG,CAACC,OAAQ,GAAGtB,SAAA,EACdD,EAAAA,EAAAA,KAACwB,EAAAA,EAAG,CAACnB,KAAM,GAAGJ,UACZD,EAAAA,EAAAA,KAAC5F,EAAAA,EAAKqH,KAAI,CACRC,MAAM,oCACNhD,KAAK,UACLiD,MAAO,CACL,CACEC,UAAU,EACVxF,QAAS,8FAEX6D,UACFD,EAAAA,EAAAA,KAAC6B,EAAAA,QAAK,SAGV7B,EAAAA,EAAAA,KAACwB,EAAAA,EAAG,CAACnB,KAAM,GAAGJ,UACZD,EAAAA,EAAAA,KAAC5F,EAAAA,EAAKqH,KAAI,CACRC,MAAM,UACNhD,KAAK,UACLiD,MAAO,CACL,CACEC,UAAU,EACVxF,QAAS,qCAEX6D,UACFD,EAAAA,EAAAA,KAAC6B,EAAAA,QAAK,YAKZ7B,EAAAA,EAAAA,KAACsB,EAAAA,EAAG,CAACC,OAAQ,GAAGtB,UACdD,EAAAA,EAAAA,KAACwB,EAAAA,EAAG,CAACnB,KAAM,GAAGJ,UACZD,EAAAA,EAAAA,KAAC5F,EAAAA,EAAKqH,KAAI,CACNC,MAAM,sHACNhD,KAAM,UACNiD,MAAO,CAAC,CAACC,UAAU,EAAMxF,QAAS,gOAA4C6D,UAChFD,EAAAA,EAAAA,KAAC8B,EAAAA,EAAO,CAACC,gBAAc,EAAA9B,UACrBD,EAAAA,EAAAA,KAACgC,EAAAA,EAAM,CACHC,SAAU,EACVC,SAAUrH,EACVsH,SAAS,eACTC,SArHHC,IAA8B,IAA5BH,SAAUI,GAAYD,EACvCvH,EAAiBwH,GACjBnI,EAAKgE,eAAe,CAAClE,QAASqI,GAAa,EAoHzBC,UAhFFC,UAChB,IAAIC,EAAMC,EAAK1J,IACVyJ,IACHA,QAAY,IAAIE,SAASC,IACvB,MAAMC,EAAS,IAAIC,WACnBD,EAAOE,cAAcL,EAAKxD,eAC1B2D,EAAOG,OAAS,IAAMJ,EAAQC,EAAOI,OAAO,KAGhD,MAAMzE,EAAQ,IAAI0E,MAClB1E,EAAMiE,IAAMA,EACZ,MAAMU,EAAYvD,OAAOwD,KAAKX,GACrB,OAATU,QAAS,IAATA,GAAAA,EAAWE,SAASC,MAAM9E,EAAM+E,UAAU,EAqExBC,aAAcA,KAAM,EACpBC,SAjHOf,IACrB1F,GACF3B,EAAeqH,EACjB,EA8G8CzC,SAC7BpF,EAAc6I,OAAO,EAAI,GAAK,oBAQzC1D,EAAAA,EAAAA,KAAC2D,EAAAA,EAAM,CAAC7F,KAAK,UAAU8F,SAAS,SAASrD,MAAO,CAACsD,MAAO,QAAQ5D,SAC7DjD,EAAqB,OAAS,YAIjC,C","sources":["@crema/services/apis/axios.js","@crema/utility/helper/persistence-storage.js","@crema/services/apis/api.js","pages/sample/Filial/PostEditFilial.jsx"],"sourcesContent":["import {getItem} from '../../utility/helper/persistence-storage';\nimport axios from 'axios';\n\naxios.defaults.baseURL = `${process.env.REACT_APP_API_URL}`;\n\naxios.interceptors.request.use((config) => {\n    const jwt = getItem('lptoken');\n    const authorization = jwt!==null ? `Bearer ${jwt}` : '';\n    config.headers.authorization = authorization;\n    return config;\n});\n\nexport default axios;","export const getItem=(key)=>{\n    try {\n        return localStorage.getItem(key)\n    } catch (error) {\n        console.log('Error getting data')\n    }\n}\n\nexport const setItem=(key,data)=>{\n    try {\n        localStorage.setItem(key,data)\n    } catch (error) {\n        console.log('Error saving data')\n    }\n}\nexport const removeItem=(key)=>{\n    try {\n        return localStorage.removeItem(key)\n    } catch (error) {\n        console.log('Error removing data')\n    }\n}","import axios from './axios';\n\nconst apiService = {\n    // malutmotlarni get qilish uchun url beriladi\n    // url / boshlansin yani /edu shunga oxshagan\n    async getData(url) {\n        const {data} = await axios.get(url);\n        return data;\n    },\n    // faqat bitta malumot  get qilish uchun url va idsi beriladi\n    // url / boshlansin yani /edu shunga oxshagan\n    async getDataByID(url, id) {\n        const {data} = await axios.get(`${url}/${id}`);\n        return data;\n    },\n    // malutmotni post qilish uchun url va yaratilgan malumot beriladi\n    // url / boshlansin yani /edu shunga oxshagan\n    async postData(url, formData) {\n        const {data}= await axios.post(url, formData);\n        return data\n    },\n    // malutmotni edit qilish uchun url,id va yaratilgan malumot beriladi\n    // url / boshlansin yani /edu shunga oxshagan\n    async editData(url, formData, id) {\n        const {data}= await axios.put(`${url}/${id}`, formData)\n        return data\n    },\n    // malutmotni delete qilish uchun url va id  beriladi\n    // url / boshlansin yani /edu shunga oxshagan\n    async deleteData(url, id) {\n        await axios.delete(`${url}/${id}`);\n    },\n\n    async deleteImages(url, ids) {\n        console.log('delete image',ids)\n        await axios.delete(url, {data:ids});\n    },\n};\nexport default apiService;","import React, {useEffect, useState} from 'react';\nimport {Button, Col, Form, Input, message, Row, Upload} from 'antd';\nimport ImgCrop from 'antd-img-crop';\nimport {useMutation, useQuery} from 'react-query';\nimport apiService from '../../../@crema/services/apis/api';\nimport {AppLoader} from '../../../@crema';\nimport {useNavigate} from 'react-router-dom';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {EDIT_DATA} from '../../../shared/constants/ActionTypes';\n\nconst initialValueForm = {\n  titleRu:\"\",\n  titleUz:\"\",\n  mediaId:\"\"\n};\n\n\n\nconst PostEditFilial = () => {\n  const [form] = Form.useForm();\n  const navigate = useNavigate();\n  const {editId} = useSelector((state) => state.editData);\n  const dispatch = useDispatch();\n\n  const [fileListProps, setFileListProps] = useState([]);\n  const [valuesForm, setValues] = useState({});\n  const [isNotEditImages, setIsNotEditImages] = useState(false);\n  const [deleteImage, setDeleteImage] = useState({});\n  // query-filial\n  const {\n    mutate: postFilialMutate,\n    data: postFilial,\n    isLoading: postFilialLoading,\n    isSuccess: postFilialSuccess,\n    error: postFilialError,\n    isError: postFilialIsError,\n  } = useMutation(({url, data}) => apiService.postData(url, data),\n      {\n        onSuccess: () => message.success('Success'),\n        onError: (error) => message.error(error.message)\n      });\n  // query-image\n  const {\n    mutate: imagesUploadMutate,\n    data: imagesUpload,\n    isLoading: imagesUploadLoading,\n    isSuccess: imagesUploadSuccess,\n  } = useMutation(({url, formData}) => apiService.postData(url, formData),{\n\n    onError: (error) => message.error(error.message,'Rasmning JPG,JPEG,PNG formatlariga ruxsat etilgan')\n  });\n  // query-edit\n\n  const {\n    isLoading: editFilialLoading,\n    data: editFilialtData,\n    refetch: editFilialRefetch,\n    isSuccess: editFilialtSuccess,\n  } = useQuery(\n    ['edit-filial', editId],\n    () => apiService.getDataByID('/filial', editId),\n    {\n      enabled: false,\n    },\n  );\n  // put-query\n  const {\n    mutate: putFilial,\n    isLoading: putFilialLoading,\n    data: putData,\n    isSuccess: putFilialSuccess,\n    error: putFilialError,\n    isError: putFilialIsError,\n  } = useMutation(({url, data, id}) => apiService.editData(url, data, id),{\n    onError: (error) => message.error(error.message)\n  });\n  // delete-image-query\n  const {mutate: imagesDeleteMutate} = useMutation(({url, ids}) => apiService.deleteImages(url, ids),{\n    onSuccess: () => message.success('Success'),\n    onError: (error) => message.error(error.message)\n      }\n  );\n\n  // filial success\n  useEffect(() => {\n    let delImage=[]\n    if (putFilialSuccess) {\n      dispatch({type: EDIT_DATA, payload: ''});\n    }\n    if (editFilialtSuccess && deleteImage?.uid) {\n      delImage.push(deleteImage?.uid)\n    }\n    if (editFilialtSuccess && deleteImage?.uid ) {\n      const ids={\n        ids:delImage\n      }\n      imagesDeleteMutate({url: '/medias', ids});\n    }\n\n    if (postFilialSuccess || putFilialSuccess) {\n     \n      navigate('/filial');\n    }\n  }, [postFilial, putData]);\n\n  // filial error\n  useEffect(() => {\n    if (postFilialIsError) {\n      message.error(postFilialError.message);\n    }\n    if (putFilialIsError) {\n      message.error(putFilialError.message);\n    }\n  }, [postFilialError, putFilialError]);\n\n  // if edit filial\n  useEffect(() => {\n    if (editId !== '') {\n      editFilialRefetch();\n    }\n  }, [editId]);\n\n  // if no edit filial\n  useEffect(() => {\n    if (editId === '') {\n      form.setFieldsValue(initialValueForm);\n    }\n  }, []);\n\n  //edit filial\n  useEffect(() => {\n    const imageInitial = [\n      {\n        uid: editFilialtData?.image?._id,\n        name: editFilialtData?.image?.name,\n        status: 'done',\n        url: `${process.env.REACT_APP_API_URL}/${editFilialtData?.image?.path}`,\n      },\n    ];\n\n    if (editFilialtSuccess) {\n      const edit = {\n        titleRu: editFilialtData?.titleRu,\n        titleUz: editFilialtData?.titleUz,\n        mediaId: imageInitial,\n      };\n      setFileListProps(imageInitial);\n      form.setFieldsValue(edit);\n    }\n  }, [editFilialtData]);\n\n  // post filial\n  useEffect(() => {\n    let image=\"\"\n    if (editFilialtSuccess && imagesUploadSuccess && fileListProps[0]?.originFileObj?.uid) {\n      image = imagesUpload[0]?._id;\n    } else if (editFilialtSuccess) {\n      image = fileListProps[0]?.uid;\n    }\n\n    if (!editFilialtSuccess && imagesUpload){\n      image=imagesUpload[0]?._id\n    }\n    const data = {\n      titleRu: valuesForm.titleRu,\n      titleUz: valuesForm.titleUz,\n      mediaId:image,\n\n    };\n\n    if (imagesUploadSuccess && !editFilialtSuccess) {\n      postFilialMutate({url: '/filial', data});\n    } else if (isNotEditImages || imagesUploadSuccess) {\n      putFilial({url: '/filial', data, id: editId});\n    }\n  }, [imagesUpload, valuesForm]);\n\n  const onFinish = (values) => {\n    const formData = new FormData();\n\n    let uploadNewImage = false;\n\n    if (editFilialtSuccess) {\n      if (fileListProps[0]?.originFileObj?.uid) {\n        uploadNewImage = true;\n        formData.append('media', fileListProps[0]?.originFileObj);\n\n        setIsNotEditImages(false);\n        // setFileList(fileListProps);\n      } else {\n        uploadNewImage = false;\n        // setFileList(fileListProps);\n        setIsNotEditImages(true);\n      }\n    } else {\n      uploadNewImage = true;\n      formData.append('media', fileListProps[0]?.originFileObj);\n    }\n    if (uploadNewImage && !imagesUploadSuccess) {\n      imagesUploadMutate({url: '/medias', formData});\n    }\n\n    setValues(values);\n  };\n  const onFinishFailed = (errorInfo) => {\n    console.log('Failed:', errorInfo);\n  };\n  const onChange = ({fileList: newFileList}) => {\n    setFileListProps(newFileList);\n    form.setFieldsValue({mediaId: newFileList});\n  };\n\n\n\n  const handleRemoveImage = (file) => {\n    if (editFilialtSuccess) {\n      setDeleteImage(file);\n    }\n  };\n\n  // refresh page again get data\n\n  useEffect(() => {\n    const storedValues = JSON.parse(localStorage.getItem('myFormValues'));\n    if (storedValues) {\n      storedValues.images = [];\n      form.setFieldsValue(storedValues);\n    }\n\n    const handleBeforeUnload = () => {\n      localStorage.setItem(\n        'myFormValues',\n        JSON.stringify(form.getFieldsValue()),\n      );\n    };\n\n    window.addEventListener('beforeunload', handleBeforeUnload);\n\n    return () => {\n        localStorage.removeItem('editDataId');\n        localStorage.removeItem('myFormValues');\n      window.removeEventListener('beforeunload', handleBeforeUnload);\n    };\n  }, []);\n\n  const onPreview = async (file) => {\n    let src = file.url;\n    if (!src) {\n      src = await new Promise((resolve) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(file.originFileObj);\n        reader.onload = () => resolve(reader.result);\n      });\n    }\n    const image = new Image();\n    image.src = src;\n    const imgWindow = window.open(src);\n    imgWindow?.document.write(image.outerHTML);\n  };\n\n  return (\n    <div>\n      {imagesUploadLoading ||\n      postFilialLoading ||\n      editFilialLoading ||\n      putFilialLoading ? (\n        <AppLoader />\n      ) : (\n        <Form\n          form={form}\n          name='basic'\n          labelCol={{\n            span: 24,\n          }}\n          wrapperCol={{\n            span: 24,\n          }}\n          style={{\n            maxWidth: '100%',\n          }}\n          initialValues={initialValueForm}\n          onFinish={onFinish}\n          onFinishFailed={onFinishFailed}\n          autoComplete='off'>\n          <Row gutter={20}>\n            <Col span={12}>\n              <Form.Item\n                label='Текст Ru'\n                name='titleRu'\n                rules={[\n                  {\n                    required: true,\n                    message: 'Требуется текст RU!',\n                  },\n                ]}>\n                <Input />\n              </Form.Item>\n            </Col>\n            <Col span={12}>\n              <Form.Item\n                label='Text Uz'\n                name='titleUz'\n                rules={[\n                  {\n                    required: true,\n                    message: 'Text kiritish talab qilinadi Ru!',\n                  },\n                ]}>\n                <Input />\n              </Form.Item>\n            </Col>\n          </Row>\n\n          <Row gutter={20}>\n            <Col span={12}>\n              <Form.Item\n                  label='Изображение логотипа'\n                  name={'mediaId'}\n                  rules={[{required: true, message: 'Требуется загрузка изображения логотипа'}]}>\n                <ImgCrop rotationSlider>\n                  <Upload\n                      maxCount={1}\n                      fileList={fileListProps}\n                      listType='picture-card'\n                      onChange={onChange}\n                      onPreview={onPreview}\n                      beforeUpload={() => false}\n                      onRemove={handleRemoveImage}>\n                    {fileListProps.length>0 ? \"\" : \"Upload\"}\n                  </Upload>\n                </ImgCrop>\n              </Form.Item>\n            </Col>\n\n          </Row>\n\n          <Button type='primary' htmlType='submit' style={{width: '100%'}}>\n            {editFilialtSuccess ? 'Edit' : 'Add'}\n          </Button>\n        </Form>\n      )}\n    </div>\n  );\n};\n\nexport default PostEditFilial;\n"],"names":["axios","baseURL","concat","process","request","use","config","jwt","key","localStorage","getItem","error","console","log","authorization","headers","getData","url","data","get","getDataByID","id","postData","formData","post","editData","put","deleteData","delete","deleteImages","ids","initialValueForm","titleRu","titleUz","mediaId","PostEditFilial","form","Form","useForm","navigate","useNavigate","editId","useSelector","state","dispatch","useDispatch","fileListProps","setFileListProps","useState","valuesForm","setValues","isNotEditImages","setIsNotEditImages","deleteImage","setDeleteImage","mutate","postFilialMutate","postFilial","isLoading","postFilialLoading","isSuccess","postFilialSuccess","postFilialError","isError","postFilialIsError","useMutation","_ref","apiService","onSuccess","message","success","onError","imagesUploadMutate","imagesUpload","imagesUploadLoading","imagesUploadSuccess","_ref2","editFilialLoading","editFilialtData","refetch","editFilialRefetch","editFilialtSuccess","useQuery","enabled","putFilial","putFilialLoading","putData","putFilialSuccess","putFilialError","putFilialIsError","_ref3","imagesDeleteMutate","_ref4","useEffect","delImage","type","EDIT_DATA","payload","uid","push","setFieldsValue","_editFilialtData$imag","_editFilialtData$imag2","_editFilialtData$imag3","imageInitial","image","_id","name","status","path","edit","_fileListProps$","_fileListProps$$origi","_imagesUpload$","_imagesUpload$2","originFileObj","_fileListProps$2","storedValues","JSON","parse","images","handleBeforeUnload","setItem","stringify","getFieldsValue","window","addEventListener","removeItem","removeEventListener","_jsx","children","AppLoader","_jsxs","labelCol","span","wrapperCol","style","maxWidth","initialValues","onFinish","values","FormData","uploadNewImage","_fileListProps$3","_fileListProps$3$orig","_fileListProps$4","_fileListProps$5","append","onFinishFailed","errorInfo","autoComplete","Row","gutter","Col","Item","label","rules","required","Input","ImgCrop","rotationSlider","Upload","maxCount","fileList","listType","onChange","_ref5","newFileList","onPreview","async","src","file","Promise","resolve","reader","FileReader","readAsDataURL","onload","result","Image","imgWindow","open","document","write","outerHTML","beforeUpload","onRemove","length","Button","htmlType","width"],"sourceRoot":""}